---
  #SLURM dependences
  - name: Install epel repo
    yum: name=epel-release,yum-priorities

  - name: Add GRyCAP Repo key
    rpm_key: state=present key="http://ftpgrycap.i3m.upv.es/centos/keyFile"

  - name: Add GRyCAP Repo
    get_url: url="http://ftpgrycap.i3m.upv.es/centos/{{ansible_distribution_major_version}}/grycap.repo" dest=/etc/yum.repos.d/grycap.repo

  - name: Install rpm slurm packages (common)
    yum:
      name:
        - "slurm-{{SLURM_VERSION}}"
        - "slurm-devel-{{SLURM_VERSION}}"
        - "slurm-munge-{{SLURM_VERSION}}"
        - "slurm-openlava-{{SLURM_VERSION}}"
        - "slurm-pam_slurm-{{SLURM_VERSION}}"
        - "slurm-perlapi-{{SLURM_VERSION}}"
        - "slurm-plugins-{{SLURM_VERSION}}"
        - "slurm-seff-{{SLURM_VERSION}}"
        - "slurm-sjobexit-{{SLURM_VERSION}}"
        - "slurm-sjstat-{{SLURM_VERSION}}"
        - "slurm-slurmdb-direct-{{SLURM_VERSION}}"
        - "slurm-slurmdbd-{{SLURM_VERSION}}"
        - "slurm-sql-{{SLURM_VERSION}}"
        - "slurm-torque-{{SLURM_VERSION}}"
      state: present

